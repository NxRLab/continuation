(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[      8978,        248]
NotebookOptionsPosition[      8613,        232]
NotebookOutlinePosition[      8958,        247]
CellTagsIndexPosition[      8915,        244]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", "\"\<../\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetOptions", "[", 
   RowBox[{"NDSolve", ",", " ", 
    RowBox[{"AccuracyGoal", "\[Rule]", " ", "13"}], ",", " ", 
    RowBox[{"PrecisionGoal", "\[Rule]", " ", "13"}], ",", " ", 
    "\[IndentingNewLine]", 
    RowBox[{"Compiled", "\[Rule]", " ", "False"}], ",", " ", 
    RowBox[{"MaxSteps", "\[Rule]", " ", "Infinity"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", "\"\<NLink`\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"SetDirectory", "[", 
    RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"n", " ", "=", " ", "2"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"#", " ", "of", " ", "links"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"r", " ", "=", " ", "1"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"link", " ", "length"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"m", " ", "=", " ", "1"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"link", " ", "mass"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"g", " ", "=", " ", "9.81"}], ";"}], 
  RowBox[{"(*", " ", "gravity", " ", "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"frames", " ", "=", " ", 
   RowBox[{"ConstantArray", "[", 
    RowBox[{"0", ",", " ", 
     RowBox[{"{", 
      RowBox[{"n", ",", " ", "6"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"inertia", " ", "=", " ", 
    RowBox[{"ConstantArray", "[", 
     RowBox[{"0", ",", " ", 
      RowBox[{"{", 
       RowBox[{"n", ",", " ", "10"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"frames", "\[LeftDoubleBracket]", 
    RowBox[{
     RowBox[{"2", ";;"}], ",", " ", "5"}], "\[RightDoubleBracket]"}], " ", 
   "=", " ", 
   RowBox[{"-", "r"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"inertia", "\[LeftDoubleBracket]", 
     RowBox[{"All", ",", " ", 
      RowBox[{"{", 
       RowBox[{"1", ",", " ", "6", ",", " ", "10"}], "}"}]}], 
     "\[RightDoubleBracket]"}], " ", "=", "  ", 
    RowBox[{"{", 
     RowBox[{"m", " ", ",", " ", 
      RowBox[{"-", "r"}], ",", 
      RowBox[{
       RowBox[{"1", "/", "12"}], " ", "m", " ", 
       RowBox[{"r", "^", "2"}]}]}], " ", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"frames", " ", "//", " ", "N"}], " ", "//", " ", "MatrixForm"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"inertia", " ", "//", " ", "N"}], "//", " ", "MatrixForm"}], 
   ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"robot", " ", "description"}], " ", "*)"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"parent", " ", "=", " ", 
    RowBox[{
     RowBox[{"Range", "[", "n", "]"}], " ", "-", " ", "1"}]}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"kinematic", " ", "chain"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"joints", " ", "=", " ", 
   RowBox[{"ConstantArray", "[", 
    RowBox[{"\"\<rz\>\"", ",", " ", "n"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bcons", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0"}], "}"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rcons", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0"}], "}"}],
       ",", " ", 
      RowBox[{"{", 
       RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0"}], 
       "}"}]}], "}"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetModel", "[", 
   RowBox[{"joints", ",", " ", "parent", ",", " ", 
    RowBox[{"{", 
     RowBox[{"bcons", ",", " ", "rcons"}], "}"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", " ", "g", ",", " ", "0"}], "}"}], ",", " ", "inertia", 
    ",", " ", "frames"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.602095934984855*^9, 3.602095940641183*^9}, {
   3.6020959794324055`*^9, 3.6020960452321663`*^9}, {3.6020960916088247`*^9, 
   3.6020961631929235`*^9}, {3.603136114232024*^9, 3.6031361482199707`*^9}, {
   3.6031363207268586`*^9, 3.6031363227619705`*^9}, {3.6031400670123844`*^9, 
   3.603140067306403*^9}, 3.603140383344501*^9, {3.6031404161514*^9, 
   3.603140416240383*^9}, {3.603140480251046*^9, 3.6031404811481028`*^9}, {
   3.603146861662492*^9, 3.603146861868523*^9}, {3.603146970030717*^9, 
   3.603146995344147*^9}, 3.603147109878707*^9, {3.60315804373987*^9, 
   3.6031580505662394`*^9}, 3.603158511701649*^9, {3.603168521878549*^9, 
   3.603168583708091*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetSystemOptions", "[", 
   RowBox[{"\"\<CompileOptions\>\"", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<CompileReportExternal\>\"", "\[Rule]", "True"}], "}"}]}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`recompile", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"CompilePrint", "@", 
   RowBox[{"NLink`Private`NLinkCompile", "[", "NLink`Private`PCode", "]"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{3.6031682695891013`*^9, 3.603168610173603*^9, 
  3.603168695122468*^9, 3.6031707348922806`*^9, 3.6031708494788427`*^9, 
  3.603192709876291*^9, 3.6031943457759714`*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetSystemOptions", "[", 
   RowBox[{"\"\<CompileOptions\>\"", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<CompileReportExternal\>\"", "\[Rule]", "True"}], "}"}]}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`recompile", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"CompilePrint", "@", 
   RowBox[{
   "NLink`Private`NLinkCompile", "[", "NLink`Private`CRBCode", "]"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.603153709684655*^9, 3.6031537148589516`*^9}, {
   3.603154054534403*^9, 3.6031540625848618`*^9}, {3.603156842544063*^9, 
   3.603156886916604*^9}, {3.6031571742250566`*^9, 3.603157177706254*^9}, {
   3.6031573163692164`*^9, 3.6031573209684563`*^9}, {3.603157846984583*^9, 
   3.603157867930787*^9}, {3.603157921646865*^9, 3.6031579236849766`*^9}, {
   3.6031580141111546`*^9, 3.603158034858343*^9}, {3.603158066433151*^9, 
   3.603158069894348*^9}, 3.60315840221938*^9, {3.603158477765706*^9, 
   3.6031584891003733`*^9}, {3.603158531916807*^9, 3.6031585423584027`*^9}, {
   3.603161921406577*^9, 3.6031619456699524`*^9}, {3.603162462016534*^9, 
   3.6031624632435923`*^9}, {3.6031669167786303`*^9, 3.603166953766746*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetSystemOptions", "[", 
   RowBox[{"\"\<CompileOptions\>\"", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<CompileReportExternal\>\"", "\[Rule]", "True"}], "}"}]}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`recompile", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`NLinkCompile", "[", "NLink`Private`ABACode", "]"}], 
  "[", 
  RowBox[{
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "10"}], ",", " ", "10"}], "}"}], ",", " ", 
     "NLink`Private`nx"}], "]"}], ",", " ", 
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "10"}], ",", " ", "10"}], "}"}], ",", " ", 
     "NLink`Private`nq"}], "]"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.603158388047569*^9, 3.603158451889225*^9}, {
  3.6031586239960775`*^9, 3.603158650134575*^9}, {3.6031619539264393`*^9, 
  3.603161954353446*^9}, {3.603163781467079*^9, 3.6031637836542077`*^9}, {
  3.6031669652194033`*^9, 3.603166975529995*^9}}]
},
WindowSize->{707, 504},
WindowMargins->{{111, Automatic}, {62, Automatic}},
FrontEndVersion->"9.0 for Microsoft Windows (32-bit) (January 25, 2013)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 5060, 138, 552, "Input"],
Cell[5620, 160, 664, 15, 72, "Input"],
Cell[6287, 177, 1227, 23, 72, "Input"],
Cell[7517, 202, 1092, 28, 112, "Input"]
}
]
*)

(* End of internal cache information *)
