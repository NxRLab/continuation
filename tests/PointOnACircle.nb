(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     38924,        760]
NotebookOptionsPosition[     38088,        726]
NotebookOutlinePosition[     38452,        742]
CellTagsIndexPosition[     38409,        739]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
This is a simple model for testing the dynamic equations and derivatives with \
r and s dependent on q.\
\>", "Section",
 CellChangeTimes->{{3.6027813283659725`*^9, 3.6027813805679736`*^9}, {
   3.6027828836270304`*^9, 3.6027829138717785`*^9}, 3.603420110353161*^9, {
   3.6037700456732764`*^9, 3.6037700851577425`*^9}, {3.603770202314224*^9, 
   3.6037702499861803`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", "\"\<../\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", "\"\<NLink`\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.6036481537017326`*^9, 3.603648154091755*^9}, {
  3.603651216617138*^9, 3.603651220232342*^9}, {3.6047568868437786`*^9, 
  3.6047568884988737`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Define model", "Section",
 CellChangeTimes->{{3.6027813283659725`*^9, 3.6027813805679736`*^9}, {
   3.6027828836270304`*^9, 3.6027829138717785`*^9}, 3.603420110353161*^9, {
   3.6037700456732764`*^9, 3.6037700851577425`*^9}, {3.6037701163921785`*^9, 
   3.603770120532798*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"robot", " ", "description"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"m", " ", "=", " ", "1"}], ";", "  ", 
    RowBox[{"(*", " ", "mass", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"g", "=", "9.81"}], ";", 
    RowBox[{"(*", " ", "gravity", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"R", " ", "=", " ", "1"}], ";", 
    RowBox[{"(*", " ", 
     RowBox[{"radius", " ", "of", " ", "circle"}], " ", "*)"}], 
    "\[IndentingNewLine]", "\n", 
    RowBox[{"parent", " ", "=", " ", 
     RowBox[{"{", "0", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"joints", " ", "=", " ", 
     RowBox[{"{", "\"\<xy\>\"", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"frames", " ", "=", " ", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{"0", ",", " ", 
       RowBox[{"{", 
        RowBox[{"1", ",", " ", "6"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"inertia", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"PadRight", "[", 
       RowBox[{
        RowBox[{"{", "m", "}"}], ",", " ", "10"}], "]"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"cons", " ", "=", " ", 
     RowBox[{"{", "\"\<circle\>\"", "}"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"NLink`Private`AddJoint", "[", 
     RowBox[{"\"\<xy\>\"", ",", " ", 
      RowBox[{"{", 
       RowBox[{"\"\<px\>\"", ",", " ", "\"\<py\>\""}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "constrain", " ", "point", " ", "to", " ", "lie", " ", "on", " ", "a", 
     " ", "circle"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"A", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"0", ",", " ", "0", ",", " ", "0", ",", " ", 
       RowBox[{
        RowBox[{"\[DoubleStruckQ]", "[", 
         RowBox[{"1", ",", "1"}], "]"}], "/", 
        RowBox[{"R", "^", "2"}]}], ",", " ", 
       RowBox[{
        RowBox[{"\[DoubleStruckQ]", "[", 
         RowBox[{"1", ",", "2"}], "]"}], "/", 
        RowBox[{"R", "^", "2"}]}], ",", " ", "0"}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"NLink`Private`AddConstraint", "[", 
    RowBox[{"\"\<circle\>\"", ",", " ", "1", ",", " ", 
     RowBox[{"A", "&"}]}], "]"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SetModel", "[", 
     RowBox[{"joints", ",", " ", "parent", ",", " ", "cons", ",", " ", 
      RowBox[{"{", 
       RowBox[{"0", ",", " ", "g", ",", " ", "0"}], "}"}], ",", " ", 
      "inertia", ",", " ", "frames"}], "]"}], ";"}]}]}]], "Input",
 CellChangeTimes->{{3.5939714866972804`*^9, 3.593971487376317*^9}, {
   3.593971524080418*^9, 3.59397152427943*^9}, 3.5939716018668756`*^9, {
   3.593971778643999*^9, 3.593971822458508*^9}, {3.593971855738424*^9, 
   3.59397188361001*^9}, {3.5939719236272974`*^9, 3.593971936606046*^9}, {
   3.593972427098134*^9, 3.5939725136320896`*^9}, 3.593972636393119*^9, 
   3.593972923297547*^9, {3.5939729571304874`*^9, 3.5939730216492004`*^9}, {
   3.5939730630595536`*^9, 3.5939730660977273`*^9}, {3.593973159045048*^9, 
   3.5939732317142105`*^9}, {3.59397330595446*^9, 3.593973316547067*^9}, {
   3.5939735435370684`*^9, 3.5939735832653427`*^9}, 3.593973807578189*^9, 
   3.5939739839452887`*^9, {3.593974036820315*^9, 3.5939740689611654`*^9}, {
   3.5939741121276293`*^9, 3.593974117895956*^9}, {3.5939741768503323`*^9, 
   3.593974177552376*^9}, {3.5939742976182528`*^9, 3.593974299141339*^9}, {
   3.5939842677327366`*^9, 3.5939842695248365`*^9}, {3.5939910083707685`*^9, 
   3.593991019849407*^9}, {3.59399394574796*^9, 3.5939939459559765`*^9}, {
   3.593993996296853*^9, 3.5939939964878693`*^9}, {3.5939940819077606`*^9, 
   3.5939941668946238`*^9}, {3.593994212096217*^9, 3.5939942941619167`*^9}, {
   3.5939943430117135`*^9, 3.593994375594598*^9}, {3.5939944171409583`*^9, 
   3.593994569692711*^9}, {3.5939946293561115`*^9, 3.5939947138349447`*^9}, {
   3.593994821560114*^9, 3.593994843696386*^9}, 3.5939948828726287`*^9, {
   3.593994933713541*^9, 3.5939949950320563`*^9}, {3.5939950422967587`*^9, 
   3.593995042999799*^9}, {3.5939950754326563`*^9, 3.593995176469446*^9}, {
   3.5939952594561944`*^9, 3.593995260078231*^9}, {3.5939954167752028`*^9, 
   3.5939954189263268`*^9}, 3.5939958737903757`*^9, {3.5940018452523413`*^9, 
   3.5940018634573836`*^9}, {3.5940364260407205`*^9, 3.59403643929348*^9}, {
   3.59404695976937*^9, 3.5940469730251317`*^9}, {3.594047572538464*^9, 
   3.5940475767457047`*^9}, {3.594047617058014*^9, 3.5940476173430295`*^9}, 
   3.5940494453787184`*^9, {3.5940499948311844`*^9, 3.5940500051277704`*^9}, {
   3.59639250261977*^9, 3.5963925910508366`*^9}, 3.5963926628989487`*^9, {
   3.5963927036002765`*^9, 3.596392705271375*^9}, {3.596392803443016*^9, 
   3.596392805794135*^9}, {3.5990940878003387`*^9, 3.5990941152589087`*^9}, {
   3.5990941752093415`*^9, 3.5990941779595013`*^9}, {3.599094208752265*^9, 
   3.599094217847787*^9}, {3.599094289491886*^9, 3.599094339983778*^9}, 
   3.5990944185712824`*^9, {3.599144869491782*^9, 3.5991448741167912`*^9}, {
   3.5992566576984034`*^9, 3.599256669919103*^9}, {3.5992604825284348`*^9, 
   3.5992605087139378`*^9}, {3.5992640613763866`*^9, 
   3.5992640700028815`*^9}, {3.5993127913501625`*^9, 3.599312816406597*^9}, {
   3.60209670506384*^9, 3.602096707399973*^9}, {3.602096841888675*^9, 
   3.6020969608325067`*^9}, {3.6020971429829183`*^9, 3.602097180502063*^9}, {
   3.602097372311064*^9, 3.602097388141958*^9}, {3.6020974331165323`*^9, 
   3.602097455301817*^9}, {3.6021001065526304`*^9, 3.6021001491510725`*^9}, 
   3.6021002259354687`*^9, {3.6021007104362135`*^9, 3.602100714579451*^9}, {
   3.602101031090576*^9, 3.60210105702608*^9}, {3.6021011261440196`*^9, 
   3.602101156304747*^9}, {3.6021026509113383`*^9, 3.6021026749367175`*^9}, {
   3.6021027230404725`*^9, 3.602102846078514*^9}, {3.602105118684658*^9, 
   3.602105145285184*^9}, {3.6021124509175515`*^9, 3.60211245213564*^9}, {
   3.602113903642743*^9, 3.602113905275838*^9}, 3.6021146266831503`*^9, {
   3.602114963485438*^9, 3.6021149635724397`*^9}, {3.6021149998355207`*^9, 
   3.602115000013525*^9}, 3.6021150821692343`*^9, {3.6021151441637816`*^9, 
   3.602115146456915*^9}, 3.602115240065276*^9, {3.602116747227586*^9, 
   3.602116788488945*^9}, {3.6021168743938875`*^9, 3.602116918921418*^9}, {
   3.60211705795338*^9, 3.602117058329402*^9}, {3.6021172082250023`*^9, 
   3.602117238050695*^9}, {3.6021174130767174`*^9, 3.6021174409793286`*^9}, 
   3.602118991155089*^9, 3.6021200515338125`*^9, {3.6021209652971597`*^9, 
   3.602120965423167*^9}, 3.602121178350339*^9, 3.602121216713539*^9, {
   3.6021212881986322`*^9, 3.602121297543488*^9}, {3.6021213383468246`*^9, 
   3.6021213933209724`*^9}, {3.602121665196542*^9, 3.602121665440556*^9}, 
   3.6021218488140574`*^9, {3.602121923819353*^9, 3.6021219278416014`*^9}, {
   3.602122118261487*^9, 3.6021221189805307`*^9}, {3.6021221599268737`*^9, 
   3.6021221789719644`*^9}, {3.602122808604021*^9, 3.6021228121562243`*^9}, {
   3.6021229080357103`*^9, 3.602122928665897*^9}, {3.602123134881706*^9, 
   3.602123140899048*^9}, {3.6021232344284067`*^9, 3.602123234771427*^9}, {
   3.602124758847705*^9, 3.6021247668741646`*^9}, {3.602125139931528*^9, 
   3.6021251600677004`*^9}, {3.602125192955579*^9, 3.602125236156049*^9}, {
   3.6021265790579424`*^9, 3.6021266365292344`*^9}, {3.602126673874372*^9, 
   3.602126714018671*^9}, {3.6021267662706633`*^9, 3.602126794718292*^9}, {
   3.6021268513435335`*^9, 3.6021268557667885`*^9}, {3.6021271166947308`*^9, 
   3.602127165831544*^9}, {3.602127585322581*^9, 3.602127633443323*^9}, {
   3.6021276861803436`*^9, 3.602127707491564*^9}, 3.6021277585355062`*^9, {
   3.6021278102944508`*^9, 3.602127812090554*^9}, {3.602128686289612*^9, 
   3.602128697020231*^9}, {3.6021289919411383`*^9, 3.6021290133103404`*^9}, {
   3.6021810277672796`*^9, 3.6021810493923187`*^9}, {3.6021815383776503`*^9, 
   3.602181551424554*^9}, 3.6021871448609715`*^9, {3.602245496130098*^9, 
   3.602245514411386*^9}, {3.6022455520208387`*^9, 3.6022455990834246`*^9}, {
   3.602245945896604*^9, 3.602245967287275*^9}, {3.6022460373342857`*^9, 
   3.602246096053151*^9}, 3.602246138193857*^9, {3.6022462100689993`*^9, 
   3.6022462105221252`*^9}, {3.602246371631815*^9, 3.602246371741205*^9}, {
   3.602246412710018*^9, 3.602246412772521*^9}, {3.602246478522649*^9, 
   3.6022464797101493`*^9}, 3.6022465472884083`*^9, {3.602246624772934*^9, 
   3.6022466253041883`*^9}, {3.602246686944931*^9, 3.6022466873824344`*^9}, {
   3.602246719273119*^9, 3.602246719366869*^9}, {3.6022469903830266`*^9, 
   3.6022470080705595`*^9}, {3.6022478665584784`*^9, 3.602247880628271*^9}, {
   3.602248540025034*^9, 3.602248540367052*^9}, {3.6022492103145027`*^9, 
   3.6022493015178337`*^9}, {3.602252611417851*^9, 3.602252617964737*^9}, {
   3.6022529482466364`*^9, 3.6022529503716373`*^9}, {3.6022533144661007`*^9, 
   3.6022533372317743`*^9}, {3.602253487778939*^9, 3.602253489435195*^9}, {
   3.602253520638381*^9, 3.602253521154005*^9}, {3.6022536092635508`*^9, 
   3.6022536176854424`*^9}, {3.6022539283266745`*^9, 
   3.6022539567486067`*^9}, {3.602254320093068*^9, 3.6022543236087008`*^9}, {
   3.602254363093151*^9, 3.6022543764056773`*^9}, {3.602254407530737*^9, 
   3.602254437827672*^9}, {3.6022545528435216`*^9, 3.602254557374777*^9}, {
   3.6022546029529953`*^9, 3.602254636312434*^9}, {3.602255006672535*^9, 
   3.602255009578789*^9}, {3.6022551988291607`*^9, 3.6022552010166636`*^9}, {
   3.602255240469866*^9, 3.6022552611730275`*^9}, {3.6022634132929535`*^9, 
   3.602263441199258*^9}, {3.6022636337308846`*^9, 3.602263642527775*^9}, {
   3.6022650560339346`*^9, 3.6022650595183163`*^9}, 3.602265119252808*^9, {
   3.602295048897744*^9, 3.602295071989068*^9}, {3.6022951155855637`*^9, 
   3.602295119441803*^9}, {3.6022953174231224`*^9, 3.6022954100414257`*^9}, {
   3.6022956633949347`*^9, 3.6022956931996417`*^9}, {3.602299289208573*^9, 
   3.602299296570998*^9}, {3.602299343224684*^9, 3.602299344910762*^9}, {
   3.6022996958438587`*^9, 3.602299696230894*^9}, {3.6023000676001453`*^9, 
   3.602300067684153*^9}, {3.602300332344309*^9, 3.602300379391003*^9}, {
   3.6024395715385513`*^9, 3.602439571616686*^9}, {3.6024398793672714`*^9, 
   3.602439892945426*^9}, {3.6024417414166555`*^9, 3.6024417437737885`*^9}, {
   3.6024436977844443`*^9, 3.6024437248589993`*^9}, {3.6024437661653633`*^9, 
   3.6024437683494945`*^9}, {3.602443834933312*^9, 3.6024438375634623`*^9}, {
   3.6024453396114793`*^9, 3.6024453549813643`*^9}, {3.602446634207612*^9, 
   3.602446715739272*^9}, {3.6024485107450824`*^9, 3.602448512911203*^9}, {
   3.602448972582514*^9, 3.6024489729615355`*^9}, {3.6024492268520765`*^9, 
   3.602449239238782*^9}, {3.602449317136245*^9, 3.602449318100308*^9}, {
   3.6024500879043846`*^9, 3.6024500947437763`*^9}, {3.602467923862791*^9, 
   3.6024679312682314`*^9}, {3.602468070360177*^9, 3.6024680962656612`*^9}, 
   3.6024682560148287`*^9, {3.60246859011594*^9, 3.602468592241064*^9}, {
   3.6024686901046867`*^9, 3.6024688938873563`*^9}, {3.602468990135847*^9, 
   3.6024689948951406`*^9}, {3.602469352772617*^9, 3.6024693695795794`*^9}, {
   3.602469423000636*^9, 3.6024694375844917`*^9}, {3.6024694678432064`*^9, 
   3.6024694939267187`*^9}, {3.60246995372405*^9, 3.6024699542470646`*^9}, {
   3.602512374231756*^9, 3.6025123792000237`*^9}, {3.6025125733151407`*^9, 
   3.6025125973935194`*^9}, {3.602617056237046*^9, 3.602617077495263*^9}, {
   3.6026176164551463`*^9, 3.6026176192312875`*^9}, {3.6026176746514606`*^9, 
   3.6026177103915076`*^9}, {3.6026196519111853`*^9, 3.602619677754985*^9}, 
   3.602620052630718*^9, {3.6026201142714634`*^9, 3.602620121755872*^9}, 
   3.602620154021541*^9, {3.602627962275591*^9, 3.6026279753323393`*^9}, {
   3.602631227260646*^9, 3.6026312308231325`*^9}, {3.602631555933143*^9, 
   3.6026315796675653`*^9}, {3.60270219456227*^9, 3.602702223227913*^9}, {
   3.602702502941929*^9, 3.602702504766035*^9}, {3.6027067631778984`*^9, 
   3.602706840124317*^9}, {3.6027071344541597`*^9, 3.602707135154217*^9}, {
   3.602707193864562*^9, 3.602707194363594*^9}, {3.6027129041532717`*^9, 
   3.602712906872423*^9}, {3.6027315217974696`*^9, 3.6027315219644794`*^9}, {
   3.602731555800417*^9, 3.602731555876424*^9}, {3.602783172211561*^9, 
   3.6027832042453938`*^9}, {3.602783254689283*^9, 3.602783264734857*^9}, {
   3.6027833049011583`*^9, 3.6027833053211823`*^9}, {3.6027835265808487`*^9, 
   3.602783527417901*^9}, 3.602808027733332*^9, {3.602812042620666*^9, 
   3.6028121585583897`*^9}, {3.602812256574207*^9, 3.6028122650586004`*^9}, {
   3.6029575129859424`*^9, 3.6029575145550294`*^9}, {3.602963441568598*^9, 
   3.6029634723733644`*^9}, {3.602963507304366*^9, 3.6029635083004217`*^9}, {
   3.602965465624511*^9, 3.6029654696007395`*^9}, {3.602966673268669*^9, 
   3.6029666737216935`*^9}, {3.6034079347709103`*^9, 3.603407958803286*^9}, {
   3.603601627447323*^9, 3.6036016521587424`*^9}, {3.6036016905719423`*^9, 
   3.603601785009347*^9}, {3.6036351610781727`*^9, 3.6036351618750467`*^9}, {
   3.6036374261294785`*^9, 3.603637440707629*^9}, {3.603637478113964*^9, 
   3.603637602489213*^9}, {3.603637670051842*^9, 3.603637714770677*^9}, {
   3.6036377832239227`*^9, 3.603637785489552*^9}, {3.603637853630311*^9, 
   3.6036379494117565`*^9}, {3.6036485352085795`*^9, 
   3.6036486427547355`*^9}, {3.6036486776567373`*^9, 3.603648708171485*^9}, {
   3.6036487704170494`*^9, 3.6036488185228043`*^9}, {3.6036488887078238`*^9, 
   3.6036490493290215`*^9}, {3.603650552298087*^9, 3.6036506705918665`*^9}, {
   3.603650984163823*^9, 3.603651041288099*^9}, {3.6036513051852064`*^9, 
   3.6036513101184893`*^9}, {3.603651815295438*^9, 3.603651818232588*^9}, {
   3.60365206053546*^9, 3.6036520822547073`*^9}, {3.6036590032376747`*^9, 
   3.603659005640809*^9}, {3.603662166946512*^9, 3.60366217387391*^9}, 
   3.6036637536883793`*^9, 3.6036637898304625`*^9, 3.6036683527057505`*^9, 
   3.6036692606982565`*^9, 3.6036696379468613`*^9, 3.603669823137478*^9, {
   3.603670433663437*^9, 3.603670447201206*^9}, {3.603672529746472*^9, 
   3.60367253131956*^9}, {3.603672782074918*^9, 3.6036727847620764`*^9}, {
   3.6036728258894324`*^9, 3.6036728314497476`*^9}, {3.603672979139204*^9, 
   3.603672986018598*^9}, {3.6036731493869514`*^9, 3.6036731750234213`*^9}, {
   3.6036764384107423`*^9, 3.603676507670712*^9}, {3.603676649613842*^9, 
   3.6036766545791216`*^9}, {3.6036767183427706`*^9, 3.603676721411965*^9}, {
   3.6036780000831747`*^9, 3.603678001444253*^9}, {3.6036781970914564`*^9, 
   3.6036782031738043`*^9}, {3.603678873653201*^9, 3.603678879372528*^9}, {
   3.6036790827731905`*^9, 3.6036790965799665`*^9}, {3.603679255679078*^9, 
   3.6036792574431787`*^9}, {3.6036793059319553`*^9, 
   3.6036793666424513`*^9}, {3.6036795002460833`*^9, 
   3.6036795177000833`*^9}, {3.603679669059751*^9, 3.603679674683086*^9}, {
   3.6036797138013105`*^9, 3.6036797455561447`*^9}, {3.6036809385314493`*^9, 
   3.6036809411195946`*^9}, {3.6036815487283936`*^9, 
   3.6036815490424104`*^9}, {3.6036852568127413`*^9, 3.603685263141104*^9}, {
   3.6036853678201003`*^9, 3.603685386386162*^9}, {3.6037145206029353`*^9, 
   3.6037145352123384`*^9}, {3.603721516026922*^9, 3.603721579551564*^9}, {
   3.603721704171695*^9, 3.6037217067418427`*^9}, {3.6037293926086483`*^9, 
   3.6037293953447895`*^9}, {3.603729499215748*^9, 3.603729501056837*^9}, {
   3.6037295327806563`*^9, 3.6037295644814725`*^9}, {3.603730255422037*^9, 
   3.6037302640745387`*^9}, {3.6037302953383255`*^9, 3.6037303087801094`*^9}, 
   3.603750988480494*^9, 3.6037510289128094`*^9, 3.6037513186974063`*^9, {
   3.603751514288608*^9, 3.6037515277923946`*^9}, {3.603751574428049*^9, 
   3.6037515815624576`*^9}, {3.603754779016753*^9, 3.6037548062051296`*^9}, {
   3.6037686149048553`*^9, 3.6037686157798557`*^9}, {3.6042381664444923`*^9, 
   3.604238168293598*^9}, {3.6042382372765503`*^9, 3.6042382799419928`*^9}, {
   3.6042383100647173`*^9, 3.6042383194002485`*^9}, {3.6042383640568094`*^9, 
   3.604238372688304*^9}, {3.604238403258054*^9, 3.6042385193027015`*^9}, {
   3.604238777938511*^9, 3.6042388053820815`*^9}, 3.6042389164464426`*^9, 
   3.604239303702619*^9, {3.6042402125086603`*^9, 3.6042402141487556`*^9}, {
   3.6047686496363935`*^9, 3.604768652298546*^9}, {3.6047762503366594`*^9, 
   3.604776275279087*^9}, 3.604787297443289*^9, {3.6048488587974415`*^9, 
   3.6048488922743587`*^9}, {3.604849067444392*^9, 3.604849067778408*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Run animation", "Section",
 CellChangeTimes->{{3.6027813283659725`*^9, 3.6027813805679736`*^9}, {
   3.6027828836270304`*^9, 3.6027829138717785`*^9}, 3.603420110353161*^9, {
   3.6037700456732764`*^9, 3.6037700851577425`*^9}, {3.6037701163921785`*^9, 
   3.603770120532798*^9}, {3.603770169970394*^9, 3.603770171251649*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"f", " ", "=", " ", 
   RowBox[{"NLinkCompile", "[", "NLink`Private`PCRBCode", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"fcn", "[", 
    RowBox[{"s_Real", ",", " ", "x_"}], "]"}], " ", ":=", " ", 
   RowBox[{"f", "[", 
    RowBox[{"x", ",", " ", "u0"}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"t", " ", "=", " ", "5"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x0", " ", "=", " ", 
   RowBox[{"ConstantArray", "[", 
    RowBox[{"0", ",", " ", "NLink`Private`nx"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"u0", " ", "=", " ", 
    RowBox[{"ConstantArray", "[", 
     RowBox[{"0", ",", " ", "NLink`Private`nq"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Theta]", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d\[Theta]", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"x0", "\[LeftDoubleBracket]", 
    RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}], " ", "=", " ", 
   RowBox[{"R", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Cos", "[", "\[Theta]", "]"}], ",", " ", 
      RowBox[{"Sin", "[", "\[Theta]", "]"}]}], "}"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"x0", "\[LeftDoubleBracket]", 
     RowBox[{"3", ";;", "4"}], "\[RightDoubleBracket]"}], " ", "=", " ", 
    RowBox[{"R", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", "\[Theta]", "]"}]}], ",", " ", 
       RowBox[{"Cos", "[", "\[Theta]", "]"}]}], "}"}], " ", "d\[Theta]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"flow", " ", "=", " ", 
    RowBox[{"x", "/.", " ", 
     RowBox[{"First", "@", 
      RowBox[{"NDSolve", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"x", "'"}], "[", "s", "]"}], " ", "\[Equal]", " ", 
           RowBox[{"fcn", "[", 
            RowBox[{"s", ",", " ", 
             RowBox[{"x", "[", "s", "]"}]}], "]"}]}], ",", " ", 
          RowBox[{
           RowBox[{"x", "[", "0", "]"}], " ", "\[Equal]", " ", "x0"}]}], 
         "}"}], ",", " ", "x", ",", " ", 
        RowBox[{"{", 
         RowBox[{"s", ",", " ", "0", ",", " ", "t"}], "}"}]}], "]"}]}]}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"range", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "R"}], ",", " ", "R"}], "}"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"-", "R"}], ",", " ", "R"}], "}"}]}], "}"}]}], ";"}], "\n", 
 RowBox[{"Animate", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"p", " ", "=", " ", 
     RowBox[{
      RowBox[{"NLink`Private`GetPoints", "[", 
       RowBox[{"flow", "[", "s", "]"}], "]"}], "[", 
      RowBox[{"[", 
       RowBox[{"1", ",", "1", ",", " ", 
        RowBox[{"1", ";;", "2"}]}], "]"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Show", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Graphics", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Circle", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"0", ",", "0"}], "}"}], ",", " ", 
           RowBox[{"range", "\[LeftDoubleBracket]", 
            RowBox[{"1", ",", "2"}], "\[RightDoubleBracket]"}]}], "]"}], ",", 
         " ", 
         RowBox[{"PointSize", "[", "Large", "]"}], ",", " ", 
         RowBox[{"Point", "[", "p", "]"}]}], "}"}], "]"}], ",", "  ", 
      RowBox[{"PlotRange", "\[Rule]", " ", 
       RowBox[{"2", "range"}]}]}], "\[IndentingNewLine]", "]"}]}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{"s", ",", " ", "0", ",", " ", "t"}], "}"}], ",", " ", 
   RowBox[{"AnimationRunning", "\[Rule]", "True"}], ",", " ", 
   RowBox[{"AnimationRepetitions", "\[Rule]", "1"}]}], "\[IndentingNewLine]", 
  "]"}]}], "Input",
 CellChangeTimes->{{3.603651446045274*^9, 3.6036514485074143`*^9}, {
   3.6036515948617954`*^9, 3.603651613956908*^9}, 3.603663705165599*^9, 
   3.603663757837619*^9, {3.6036637984089403`*^9, 3.6036638123697405`*^9}, 
   3.6036638518980036`*^9, {3.6036683594171333`*^9, 3.6036684140882688`*^9}, {
   3.6036686956029005`*^9, 3.6036687441146793`*^9}, {3.603668793155486*^9, 
   3.6036688072433124`*^9}, {3.603668887762904*^9, 3.603668965467353*^9}, 
   3.603669026587855*^9, {3.603669114883911*^9, 3.6036691209452543`*^9}, 
   3.6036692121404805`*^9, {3.603669271523882*^9, 3.6036693011795797`*^9}, {
   3.6036694231385612`*^9, 3.6036694301789684`*^9}, {3.603670465148235*^9, 
   3.6036704827402434`*^9}, {3.603670608619449*^9, 3.603670614370779*^9}, {
   3.603670657355241*^9, 3.6036706738431883`*^9}, {3.6036707222769613`*^9, 
   3.603670735635726*^9}, 3.6036707777081347`*^9, {3.6036708307401743`*^9, 
   3.6036708393076687`*^9}, {3.6036709952675953`*^9, 3.603671094648286*^9}, 
   3.603671148467369*^9, {3.603671182733344*^9, 3.6036712180923543`*^9}, {
   3.603671326942589*^9, 3.603671343114512*^9}, {3.603671507828947*^9, 
   3.603671508060961*^9}, {3.603671674929516*^9, 3.603671684906088*^9}, {
   3.603671840204981*^9, 3.60367185956509*^9}, {3.6036720284787626`*^9, 
   3.6036720436306314`*^9}, {3.6036720908293514`*^9, 3.603672107502288*^9}, {
   3.603672239859868*^9, 3.6036722956830645`*^9}, {3.6036723382905083`*^9, 
   3.603672384606154*^9}, {3.603672416281974*^9, 3.6036724949904785`*^9}, {
   3.6036725831105223`*^9, 3.6036725852386503`*^9}, {3.6036726369916105`*^9, 
   3.6036726405908165`*^9}, {3.6036728631115594`*^9, 
   3.6036728864638968`*^9}, {3.6036729437591953`*^9, 3.603672944311209*^9}, {
   3.6036730001424065`*^9, 3.603673013047146*^9}, 3.603673081048046*^9, {
   3.603673370621623*^9, 3.6036733926928873`*^9}, {3.6036734261038*^9, 
   3.603673431815127*^9}, {3.603673464399993*^9, 3.603673469095262*^9}, {
   3.6036735959925327`*^9, 3.6036736383019514`*^9}, {3.603673696343279*^9, 
   3.603673743403968*^9}, 3.6036747611102514`*^9, {3.6036748368245907`*^9, 
   3.6036749032493906`*^9}, {3.6036750337018614`*^9, 3.603675083668723*^9}, {
   3.603679404766613*^9, 3.603679407005743*^9}, {3.603679437964517*^9, 
   3.603679513065841*^9}, 3.6036795713151574`*^9, {3.6036796054931107`*^9, 
   3.6036796061251464`*^9}, {3.603685372146365*^9, 3.6036853734004188`*^9}, {
   3.6036854867739124`*^9, 3.6036855628152657`*^9}, {3.603685609803957*^9, 
   3.6036856105760007`*^9}, {3.6036857050364237`*^9, 3.603685798827778*^9}, {
   3.6036858577651567`*^9, 3.603685916511521*^9}, {3.603686025538764*^9, 
   3.6036860256467705`*^9}, {3.603686144796589*^9, 3.603686145759649*^9}, {
   3.603686215769655*^9, 3.6036862632813787`*^9}, 3.603686363689129*^9, 
   3.6036864375653596`*^9, {3.6036867962513685`*^9, 3.6036867976263747`*^9}, {
   3.603721632278578*^9, 3.6037216536948037`*^9}, {3.6037218019412966`*^9, 
   3.6037218022633142`*^9}, {3.603729506595158*^9, 3.603729514810624*^9}, 
   3.6037302449244576`*^9, {3.6037316939636636`*^9, 3.6037316981579046`*^9}, {
   3.603731762592594*^9, 3.6037317857449203`*^9}, {3.6037319382576485`*^9, 
   3.603732019826321*^9}, {3.6037320664509907`*^9, 3.6037320698621907`*^9}, {
   3.6037321178449383`*^9, 3.6037321179529448`*^9}, {3.603732148189676*^9, 
   3.603732180746541*^9}, {3.6037323922546525`*^9, 3.603732438425297*^9}, {
   3.6037326783740396`*^9, 3.60373271648622*^9}, 3.6037327777877283`*^9, 
   3.603732814063805*^9, 3.603732850643902*^9, {3.603732900617783*^9, 
   3.603732972044851*^9}, {3.6037330046627417`*^9, 3.6037330047197266`*^9}, {
   3.603733129470379*^9, 3.6037331512546215`*^9}, 3.603733219436549*^9, {
   3.6037333233374796`*^9, 3.603733364350828*^9}, {3.603733416098792*^9, 
   3.603733473783097*^9}, 3.603733518212641*^9, {3.603733742641493*^9, 
   3.6037337428485045`*^9}, {3.603733785538948*^9, 3.603733812139473*^9}, {
   3.603733967771385*^9, 3.603733969686495*^9}, {3.603734374894699*^9, 
   3.6037344217513885`*^9}, {3.603734856022252*^9, 3.603734863920718*^9}, 
   3.6037509736936493`*^9, {3.603751363429969*^9, 3.6037514021651864`*^9}, {
   3.6037516147643614`*^9, 3.6037517468169374`*^9}, {3.6037518031171455`*^9, 
   3.603751812658698*^9}, {3.6037518497878203`*^9, 3.6037518626845593`*^9}, {
   3.6037519638303556`*^9, 3.603751984991563*^9}, {3.6037520353574476`*^9, 
   3.6037520357484703`*^9}, {3.6037521236535044`*^9, 3.603752176706543*^9}, {
   3.6037522094824195`*^9, 3.6037522975994654`*^9}, 3.6037535863734417`*^9, {
   3.6037536284516473`*^9, 3.6037537658112926`*^9}, {3.6037539080771933`*^9, 
   3.603754096171312*^9}, {3.6037541612183104`*^9, 3.603754194905881*^9}, {
   3.603754234765335*^9, 3.603754249624737*^9}, {3.603754306531098*^9, 
   3.603754329796768*^9}, {3.603754381156244*^9, 3.6037544018750343`*^9}, {
   3.6037544821567965`*^9, 3.603754530844392*^9}, {3.6037546725321693`*^9, 
   3.603754737610421*^9}, {3.604238951791466*^9, 3.6042391787114615`*^9}, {
   3.604239219067773*^9, 3.6042392192347803`*^9}, {3.6042392701476974`*^9, 
   3.6042392704747143`*^9}, {3.604239359986842*^9, 3.60423937705482*^9}, {
   3.604239414974992*^9, 3.604239438627365*^9}, {3.604239478437626*^9, 
   3.604239480126724*^9}, {3.6042395464105177`*^9, 3.6042395695928493`*^9}, {
   3.604239607625024*^9, 3.604239636080658*^9}, {3.604240056992757*^9, 
   3.604240059528903*^9}, {3.604240255113103*^9, 3.6042402819126387`*^9}, {
   3.6042404058117514`*^9, 3.6042404060887504`*^9}, 3.6042414785061617`*^9, {
   3.6047667808533783`*^9, 3.604766801282541*^9}, {3.6047685353558483`*^9, 
   3.604768536610939*^9}, {3.604776716404352*^9, 3.6047767391406546`*^9}, {
   3.6047767756787434`*^9, 3.604776792924731*^9}, {3.604848362133999*^9, 
   3.6048483753457556`*^9}, {3.6048491709713173`*^9, 
   3.6048491728804274`*^9}, {3.6048492250894365`*^9, 
   3.6048492412333603`*^9}, {3.6048493860996385`*^9, 3.60484943362636*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"energy0", " ", "=", " ", 
   RowBox[{"Total", "@", 
    RowBox[{
     RowBox[{"NLink`Private`MechanicalQuantities", "[", 
      RowBox[{"flow", "[", "0", "]"}], "]"}], "\[LeftDoubleBracket]", 
     RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Plot", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"Total", "[", 
     RowBox[{
      RowBox[{"NLink`Private`MechanicalQuantities", "[", 
       RowBox[{"flow", "[", "s", "]"}], "]"}], "\[LeftDoubleBracket]", 
      RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}], "]"}], "-", 
    "energy0"}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"s", ",", " ", "0", ",", " ", "t"}], "}"}], ",", " ", 
   RowBox[{"PlotRange", "\[Rule]", "All"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.6036862867357197`*^9, 3.603686332696355*^9}, {
  3.603686394810911*^9, 3.6036864235225554`*^9}, {3.6037548299239144`*^9, 
  3.6037548350176716`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Euler-Lagrange Derivation", "Section",
 CellChangeTimes->{{3.6027813283659725`*^9, 3.6027813805679736`*^9}, {
   3.6027828836270304`*^9, 3.6027829138717785`*^9}, 3.603420110353161*^9, {
   3.603770188845435*^9, 3.603770189361058*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Clear", "[", 
    RowBox[{"m", ",", " ", "g", " ", ",", "R"}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", "\"\<EulerLagrange`\>\""}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"mass", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"{", 
     RowBox[{"m", " ", ",", " ", "0"}], "}"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"com", "[", "x_", "]"}], " ", ":=", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", " ", 
      RowBox[{"x", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
      ",", " ", 
      RowBox[{"x", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]}], 
     "}"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ELPostProcess", "[", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"All", ",", " ", "Simplify"}], "}"}], "}"}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ELA", " ", "=", " ", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{
       FractionBox[
        RowBox[{"#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
        SuperscriptBox["R", "2"]], ",", 
       FractionBox[
        RowBox[{"#", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], 
        SuperscriptBox["R", "2"]]}], "}"}], "}"}], "&"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ELSystem", "[", 
    RowBox[{"NLink`Private`nq", ",", " ", "mass", ",", " ", 
     RowBox[{"{", "com", "}"}], ",", " ", "g", ",", " ", "ELA"}], "]"}], 
   ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "system", " ", "is", " ", "simple", " ", "enough", " ", "that", " ", "we", 
    " ", "can", " ", "run", " ", "symbolic", " ", "tests"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"inertia", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"PadRight", "[", 
     RowBox[{
      RowBox[{"{", "m", "}"}], ",", " ", "10"}], "]"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{"0", ",", " ", "0", ",", " ", "0", ",", " ", 
     RowBox[{
      RowBox[{"\[DoubleStruckQ]", "[", 
       RowBox[{"1", ",", "1"}], "]"}], "/", 
      RowBox[{"R", "^", "2"}]}], ",", " ", 
     RowBox[{
      RowBox[{"\[DoubleStruckQ]", "[", 
       RowBox[{"1", ",", "2"}], "]"}], "/", 
      RowBox[{"R", "^", "2"}]}], ",", " ", "0"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`AddConstraint", "[", 
   RowBox[{"\"\<circle\>\"", ",", " ", "1", ",", " ", 
    RowBox[{"A", "&"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetModel", "[", 
   RowBox[{"joints", ",", " ", "parent", ",", " ", "cons", ",", " ", 
    RowBox[{"{", 
     RowBox[{"0", ",", " ", "g", ",", " ", "0"}], "}"}], ",", " ", "inertia", 
    ",", " ", "frames", ",", " ", "All"}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.6033940799914947`*^9, 3.6033941406609693`*^9}, {
   3.60339422087656*^9, 3.603394256863624*^9}, {3.603394291192603*^9, 
   3.6033943221273565`*^9}, {3.603394360520578*^9, 3.6033943781255817`*^9}, {
   3.603394437456966*^9, 3.603394471872936*^9}, {3.6033945970331154`*^9, 
   3.603394605811607*^9}, {3.603395105965248*^9, 3.603395106202263*^9}, {
   3.603395222627929*^9, 3.603395260451095*^9}, {3.603395300501384*^9, 
   3.6033953016804543`*^9}, {3.603395496188593*^9, 3.603395629649242*^9}, {
   3.603396131235966*^9, 3.603396153754249*^9}, {3.603396187010153*^9, 
   3.603396234188855*^9}, {3.6033963891887302`*^9, 3.6033963919918947`*^9}, {
   3.6033964456379676`*^9, 3.603396506920477*^9}, {3.6033976108716955`*^9, 
   3.603397665338828*^9}, {3.6033977070442038`*^9, 3.6033977977363973`*^9}, {
   3.603398093605341*^9, 3.6033981455263147`*^9}, {3.6033982867784023`*^9, 
   3.6033983604146166`*^9}, {3.603398750438955*^9, 3.603398776237432*^9}, {
   3.603407717217448*^9, 3.603407745803088*^9}, {3.603407783088223*^9, 
   3.6034077857743735`*^9}, 3.603407845834814*^9, {3.603408369527807*^9, 
   3.603408369680813*^9}, {3.603408803488658*^9, 3.603408807975913*^9}, {
   3.6034088586838193`*^9, 3.603408861178963*^9}, {3.603408928254803*^9, 
   3.603408963972849*^9}, {3.6034090421993284`*^9, 3.6034090655126824`*^9}, {
   3.6034091179936686`*^9, 3.6034091532746897`*^9}, {3.6034097450985813`*^9, 
   3.603409785427891*^9}, {3.6034202031064725`*^9, 3.6034202279688964`*^9}, {
   3.6036352294376926`*^9, 3.603635230031432*^9}, {3.603635341312899*^9, 
   3.6036353671879487`*^9}, 3.6036354865944467`*^9, {3.6036355973133993`*^9, 
   3.603635597485274*^9}, {3.60363563721973*^9, 3.603635812454444*^9}, {
   3.6036358457513847`*^9, 3.6036358623139315`*^9}, {3.6036360175173454`*^9, 
   3.6036360281267424`*^9}, {3.6036363525180006`*^9, 
   3.6036363539398775`*^9}, {3.603636698862445*^9, 3.603636725674979*^9}, {
   3.6036383821782155`*^9, 3.60363839149074*^9}, {3.603638642147479*^9, 
   3.603638871460426*^9}, {3.6036389237574043`*^9, 3.6036390165700874`*^9}, {
   3.6036391858829165`*^9, 3.603639209086099*^9}, {3.6037550170805287`*^9, 
   3.603755050643097*^9}, {3.603755093158802*^9, 3.6037550975806875`*^9}, {
   3.603755131190129*^9, 3.6037551763933396`*^9}, {3.603755321987375*^9, 
   3.603755324112381*^9}, {3.6037554218782077`*^9, 3.6037554224875727`*^9}, {
   3.603768507060893*^9, 3.6037685556859903`*^9}, {3.603768588186052*^9, 
   3.6037685977641983`*^9}, {3.604848115342866*^9, 3.6048481229813027`*^9}, 
   3.604848336883571*^9, {3.6048484065635433`*^9, 3.6048484342681303`*^9}, {
   3.6048484696271524`*^9, 3.6048484980897818`*^9}, {3.6048485907790923`*^9, 
   3.60484860202674*^9}, {3.6048487786848507`*^9, 3.6048487807789707`*^9}, {
   3.6048489293064785`*^9, 3.6048489363788834`*^9}, {3.604849129542948*^9, 
   3.60484913955952*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Test the two sets of equations", "Section",
 CellChangeTimes->{{3.6028005564911757`*^9, 3.6028005569755673`*^9}, 
   3.602800616022543*^9, {3.602800660178879*^9, 3.602800710850868*^9}}],

Cell[BoxData[
 RowBox[{"Module", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"x", ",", " ", "u"}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Quiet", "[", 
     RowBox[{
      RowBox[{"ELTestModel", "[", 
       RowBox[{
        RowBox[{"Array", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
           "x", "\[LeftDoubleBracket]", "#", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "NLink`Private`nx"}], "]"}], ",", " ", 
        RowBox[{"Array", "[", 
         RowBox[{
          RowBox[{
           RowBox[{
           "u", "\[LeftDoubleBracket]", "#", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "NLink`Private`nq"}], "]"}], ",", " ", "All"}], "]"}], 
      ",", " ", 
      RowBox[{"Part", "::", "partd"}]}], "]"}], ";"}]}], 
  "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.603761603970093*^9, 3.603761641735795*^9}, {
   3.6037617759548063`*^9, 3.603761781532941*^9}, {3.603768290169844*^9, 
   3.6037682913104715`*^9}, {3.603768324169924*^9, 3.603768358482478*^9}, {
   3.6037686373267865`*^9, 3.6037686380924*^9}, {3.6037687001393924`*^9, 
   3.603768705170657*^9}, {3.6037688499990673`*^9, 3.603768865842863*^9}, {
   3.6037689027335424`*^9, 3.6037689031866817`*^9}, {3.603769551906686*^9, 
   3.603769570562976*^9}, 3.603769649094376*^9, {3.6037696916725845`*^9, 
   3.6037697136413774`*^9}, {3.6037697542977076`*^9, 
   3.6037697652196035`*^9}, {3.603808340440943*^9, 3.603808368784748*^9}, {
   3.604847282239157*^9, 3.604847298830107*^9}, {3.6048486194747353`*^9, 
   3.6048486536056876`*^9}, {3.604849043945044*^9, 3.6048490583238673`*^9}, {
   3.6048491270758038`*^9, 3.6048491371353755`*^9}, {3.604849302703862*^9, 
   3.6048493258841867`*^9}}]
}, Open  ]]
},
WindowSize->{864, 874},
WindowMargins->{{90, Automatic}, {4, Automatic}},
ShowSelection->True,
FrontEndVersion->"9.0 for Microsoft Windows (32-bit) (January 25, 2013)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 382, 7, 127, "Section"],
Cell[964, 31, 596, 15, 92, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1597, 51, 283, 4, 86, "Section"],
Cell[1883, 57, 16571, 253, 352, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[18491, 315, 330, 4, 86, "Section"],
Cell[18824, 321, 9993, 193, 452, "Input"],
Cell[28820, 516, 961, 23, 72, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[29818, 544, 240, 3, 86, "Section"],
Cell[30061, 549, 6047, 128, 389, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[36145, 682, 191, 2, 86, "Section"],
Cell[36339, 686, 1733, 37, 92, "Input"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
