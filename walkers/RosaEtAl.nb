(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     25066,        555]
NotebookOptionsPosition[     24495,        534]
NotebookOutlinePosition[     24839,        549]
CellTagsIndexPosition[     24796,        546]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell["\<\
Based on the model in:

[1] Rosa,N., A.Barber, R.D.Gregg, and K.M.Lynch, \"Stable open-loop \
brachiation on a vertical wall\", Robotics and Automation (ICRA),2012.
 
and results presented in
 
[2] Rosa, N., and K. M. Lynch, \[OpenCurlyDoubleQuote]The Passive Dynamics of \
Walking and Brachiating Robots: Results on the Topology and Stability of \
Passive Gaits\[CloseCurlyDoubleQuote], International Conference on Climbing \
and Walking Robots, 2013.\
\>", "Text",
 CellChangeTimes->{{3.60270427412436*^9, 3.6027043115085*^9}, {
  3.6027044028107295`*^9, 3.6027045731364813`*^9}, {3.6027049504000864`*^9, 
  3.6027049537432785`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", "\"\<../\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetOptions", "[", 
   RowBox[{"NDSolve", ",", " ", 
    RowBox[{"AccuracyGoal", "\[Rule]", " ", "13"}], ",", " ", 
    RowBox[{"PrecisionGoal", "\[Rule]", " ", "13"}], ",", " ", 
    "\[IndentingNewLine]", 
    RowBox[{"Compiled", "\[Rule]", " ", "False"}], ",", " ", 
    RowBox[{"MaxSteps", "\[Rule]", " ", "Infinity"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", "\"\<NLink`\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}]}], "Input"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"n", " ", "=", " ", "2"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"#", " ", "of", " ", "bodies"}], " ", "*)"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "physical", " ", "parameters", " ", "in", " ", "SI", " ", "units"}], " ", 
   "*)"}], "\n", 
  RowBox[{"(*", " ", 
   RowBox[{"mass", " ", "and", " ", "inertia"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"m1", "=", "3.083276839957533"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"link", " ", "mass"}], " ", "*)"}]}], "\n", 
 RowBox[{
  RowBox[{"m2", "=", "3.083276839957533"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"I1", "=", "5.386568898408416*^-2"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"inertia", " ", "about", " ", 
    RowBox[{"c", ".", "o", ".", "m"}]}], " ", "*)"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"I2", "=", "5.386568898408416*^-2"}], ";"}], "\[IndentingNewLine]",
   "\n", 
  RowBox[{"(*", " ", "lengths", " ", "*)"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"L1", "=", "0.610"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"link", " ", "length"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"L2", "=", "0.610"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"r2", "=", "6.37687066165708*^-2"}], ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"distance", " ", "to", " ", 
    RowBox[{"c", ".", "o", ".", "m"}]}], " ", "*)"}]}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"r1", "=", 
    RowBox[{"L1", "-", "r2"}]}], ";"}], "\n", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", "gravity", " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"g", "=", "9.81"}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"scaling", " ", "factors"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"d", " ", "=", " ", 
    RowBox[{"L1", " ", "+", " ", "L2"}]}], ";"}], " ", 
  RowBox[{"(*", " ", "length", " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dt", " ", "=", " ", 
   RowBox[{"Sqrt", "[", 
    RowBox[{"d", "/", "g"}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6027046889071293`*^9, 3.6027047025568943`*^9}, {
  3.6027047766481366`*^9, 3.6027048272440343`*^9}, {3.602704960676687*^9, 
  3.602704976762597*^9}, {3.602705530374301*^9, 3.6027055328504534`*^9}, {
  3.6027056582516227`*^9, 3.6027056675381546`*^9}, {3.6027057329369*^9, 
  3.602705756413248*^9}, {3.6027125106977396`*^9, 3.6027127702886057`*^9}, {
  3.6027128870732937`*^9, 3.6027128958807983`*^9}, {3.6027628771227975`*^9, 
  3.6027628780078506`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"frames", " ", "=", " ", 
    RowBox[{"ConstantArray", "[", 
     RowBox[{"0", ",", " ", 
      RowBox[{"{", 
       RowBox[{"n", ",", " ", "6"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "frames", " ", "is", " ", "a", " ", "list", " ", "of", " ", "spatial", " ",
     "vectors", " ", 
    RowBox[{"{", 
     RowBox[{
     "rx", ",", " ", "ry", ",", " ", "rz", ",", " ", "px", ",", " ", "py", 
      ",", " ", "pz"}], "}"}], " ", "defining", " ", "the", " ", "location", 
    " ", "of", " ", "frame", " ", "i", " ", "in", " ", "frame", " ", 
    RowBox[{"(", 
     RowBox[{"i", "-", "1"}], ")"}], " ", "coordinates", " ", "when", " ", 
    "the", " ", "robot", " ", "is", " ", "at", " ", "its", " ", 
    "\"\<home\>\"", " ", 
    RowBox[{"configuration", "."}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"frames", "\[LeftDoubleBracket]", 
     RowBox[{"2", ",", " ", "5"}], "\[RightDoubleBracket]"}], " ", "=", " ", 
    RowBox[{
     RowBox[{"-", "L1"}], "/", "d"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"frames", " ", "//", " ", "N"}], " ", "//", " ", 
  "MatrixForm"}]}], "Input",
 CellChangeTimes->{{3.602705827714327*^9, 3.6027059255759487`*^9}, {
  3.602705975284778*^9, 3.6027060014012856`*^9}, {3.602706092222486*^9, 
  3.6027061651396513`*^9}, {3.6027064157610035`*^9, 3.6027064473698206`*^9}, {
  3.6027066234108953`*^9, 3.602706624146942*^9}, {3.602712784545422*^9, 
  3.602712785616482*^9}, {3.6027131507933965`*^9, 3.602713176125847*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"inertia", " ", "=", " ", 
    RowBox[{"ConstantArray", "[", 
     RowBox[{"0", ",", " ", 
      RowBox[{"{", 
       RowBox[{"n", ",", " ", "10"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{
     "inertia", " ", "is", " ", "a", " ", "list", " ", "of", " ", "mass", " ",
       "parameters", " ", "about", " ", "the", " ", "center", " ", "of", " ", 
      "mass", " ", "and", " ", "their", " ", "location", " ", 
      RowBox[{"{", 
       RowBox[{
       "m", ",", " ", "rx", ",", " ", "ry", ",", " ", "rz", ",", " ", "px", 
        ",", " ", "py", ",", " ", "pz", ",", " ", "Ixx", ",", " ", "Iyy", ",",
         " ", "Izz"}], "}"}], " ", "of", " ", "link", " ", "i", " ", "in", 
      " ", "link", " ", "i", " ", "coordinates"}], ";", " ", 
     RowBox[{"cross", " ", "inertia", " ", "terms"}]}], ",", " ", 
    RowBox[{"e", ".", "g", "."}], ",", " ", "Ixy", ",", " ", 
    RowBox[{"are", " ", "also", " ", 
     RowBox[{"supported", "."}]}]}], " ", "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"inertia", "\[LeftDoubleBracket]", 
    RowBox[{"1", ",", " ", 
     RowBox[{"{", 
      RowBox[{"1", ",", " ", "6", ",", " ", "10"}], "}"}]}], 
    "\[RightDoubleBracket]"}], " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"d", " ", 
      RowBox[{"m1", "/", 
       RowBox[{"(", 
        RowBox[{"m2", " ", "r2"}], ")"}]}]}], " ", ",", " ", 
     RowBox[{
      RowBox[{"-", "r1"}], "/", "d"}], ",", " ", 
     RowBox[{"I1", "/", " ", 
      RowBox[{"(", 
       RowBox[{"d", " ", "m2", " ", "r2"}], ")"}]}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"inertia", "\[LeftDoubleBracket]", 
     RowBox[{"2", ",", " ", 
      RowBox[{"{", 
       RowBox[{"1", ",", " ", "6", ",", " ", "10"}], "}"}]}], 
     "\[RightDoubleBracket]"}], " ", "=", "  ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"d", " ", 
       RowBox[{"m2", "/", 
        RowBox[{"(", 
         RowBox[{"m2", " ", "r2"}], ")"}]}]}], ",", " ", 
      RowBox[{
       RowBox[{"-", "r2"}], "/", "d"}], ",", " ", 
      RowBox[{"I2", "/", " ", 
       RowBox[{"(", 
        RowBox[{"d", " ", "m2", " ", "r2"}], ")"}]}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"inertia", " ", "//", " ", "N"}], "//", " ", 
  "MatrixForm"}]}], "Input",
 CellChangeTimes->{
  3.602706085781106*^9, {3.602706215350526*^9, 3.602706409167625*^9}, {
   3.602706485544016*^9, 3.602706514816676*^9}, {3.602706581557497*^9, 
   3.602706599058504*^9}, 3.60270671902837*^9, {3.602712804724575*^9, 
   3.6027128481290627`*^9}, {3.602713028142372*^9, 3.6027130294084454`*^9}, {
   3.602713115743389*^9, 3.602713129831193*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"robot", " ", "description"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"parent", " ", "=", " ", 
     RowBox[{
      RowBox[{"Range", "[", "2", "]"}], "-", "1"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"joints", " ", "=", " ", 
     RowBox[{"{", 
      RowBox[{"\"\<pln\>\"", ",", " ", "\"\<rz\>\""}], "}"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nd", " ", "=", " ", 
     RowBox[{
      RowBox[{"2", 
       RowBox[{"Length", "@", 
        RowBox[{"NLink`Private`ExpandJoints", "[", "joints", "]"}]}]}], " ", 
      "+", " ", "1"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", "dynamics", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SetModel", "[", 
     RowBox[{"joints", ",", " ", "parent", ",", " ", 
      RowBox[{"{", "}"}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"0", ",", " ", 
        RowBox[{"g", " ", 
         RowBox[{
          RowBox[{"dt", "^", "2"}], "/", "d"}]}], ",", " ", "0"}], "}"}], ",",
       " ", "inertia", ",", " ", "frames", ",", " ", "nd"}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"f", " ", "=", " ", 
      RowBox[{"GetAccelerationFunction", "[", "\"\<All\>\"", "]"}]}], ";"}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.5939714866972804`*^9, 3.593971487376317*^9}, {
   3.593971524080418*^9, 3.59397152427943*^9}, 3.5939716018668756`*^9, {
   3.593971778643999*^9, 3.593971822458508*^9}, {3.593971855738424*^9, 
   3.59397188361001*^9}, {3.5939719236272974`*^9, 3.593971936606046*^9}, {
   3.593972427098134*^9, 3.5939725136320896`*^9}, 3.593972636393119*^9, 
   3.593972923297547*^9, {3.5939729571304874`*^9, 3.5939730216492004`*^9}, {
   3.5939730630595536`*^9, 3.5939730660977273`*^9}, {3.593973159045048*^9, 
   3.5939732317142105`*^9}, {3.59397330595446*^9, 3.593973316547067*^9}, {
   3.5939735435370684`*^9, 3.5939735832653427`*^9}, 3.593973807578189*^9, 
   3.5939739839452887`*^9, {3.593974036820315*^9, 3.5939740689611654`*^9}, {
   3.5939741121276293`*^9, 3.593974117895956*^9}, {3.5939741768503323`*^9, 
   3.593974177552376*^9}, {3.5939742976182528`*^9, 3.593974299141339*^9}, {
   3.5939842677327366`*^9, 3.5939842695248365`*^9}, {3.5939910083707685`*^9, 
   3.593991019849407*^9}, {3.59399394574796*^9, 3.5939939459559765`*^9}, {
   3.593993996296853*^9, 3.5939939964878693`*^9}, {3.5939940819077606`*^9, 
   3.5939941668946238`*^9}, {3.593994212096217*^9, 3.5939942941619167`*^9}, {
   3.5939943430117135`*^9, 3.593994375594598*^9}, {3.5939944171409583`*^9, 
   3.593994569692711*^9}, {3.5939946293561115`*^9, 3.5939947138349447`*^9}, {
   3.593994821560114*^9, 3.593994843696386*^9}, 3.5939948828726287`*^9, {
   3.593994933713541*^9, 3.5939949950320563`*^9}, {3.5939950422967587`*^9, 
   3.593995042999799*^9}, {3.5939950754326563`*^9, 3.593995176469446*^9}, {
   3.5939952594561944`*^9, 3.593995260078231*^9}, {3.5939954167752028`*^9, 
   3.5939954189263268`*^9}, 3.5939958737903757`*^9, {3.5940018452523413`*^9, 
   3.5940018634573836`*^9}, {3.5940364260407205`*^9, 3.59403643929348*^9}, {
   3.59404695976937*^9, 3.5940469730251317`*^9}, {3.594047572538464*^9, 
   3.5940475767457047`*^9}, {3.594047617058014*^9, 3.5940476173430295`*^9}, 
   3.5940494453787184`*^9, {3.5940499948311844`*^9, 3.5940500051277704`*^9}, {
   3.59639250261977*^9, 3.5963925910508366`*^9}, 3.5963926628989487`*^9, {
   3.5963927036002765`*^9, 3.596392705271375*^9}, {3.596392803443016*^9, 
   3.596392805794135*^9}, {3.5990940878003387`*^9, 3.5990941152589087`*^9}, {
   3.5990941752093415`*^9, 3.5990941779595013`*^9}, {3.599094208752265*^9, 
   3.599094217847787*^9}, {3.599094289491886*^9, 3.599094339983778*^9}, 
   3.5990944185712824`*^9, {3.599144869491782*^9, 3.5991448741167912`*^9}, {
   3.5992566576984034`*^9, 3.599256669919103*^9}, {3.5992604825284348`*^9, 
   3.5992605087139378`*^9}, {3.5992640613763866`*^9, 
   3.5992640700028815`*^9}, {3.5993127913501625`*^9, 3.599312816406597*^9}, {
   3.60209670506384*^9, 3.602096707399973*^9}, {3.602096841888675*^9, 
   3.6020969608325067`*^9}, {3.6020971429829183`*^9, 3.602097180502063*^9}, {
   3.602097372311064*^9, 3.602097388141958*^9}, {3.6020974331165323`*^9, 
   3.602097455301817*^9}, {3.6021001065526304`*^9, 3.6021001491510725`*^9}, 
   3.6021002259354687`*^9, {3.6021007104362135`*^9, 3.602100714579451*^9}, {
   3.602101031090576*^9, 3.60210105702608*^9}, {3.6021011261440196`*^9, 
   3.602101156304747*^9}, {3.6021026509113383`*^9, 3.6021026749367175`*^9}, {
   3.6021027230404725`*^9, 3.602102846078514*^9}, {3.602105118684658*^9, 
   3.602105145285184*^9}, {3.6021124509175515`*^9, 3.60211245213564*^9}, {
   3.602113903642743*^9, 3.602113905275838*^9}, 3.6021146266831503`*^9, {
   3.602114963485438*^9, 3.6021149635724397`*^9}, {3.6021149998355207`*^9, 
   3.602115000013525*^9}, 3.6021150821692343`*^9, {3.6021151441637816`*^9, 
   3.602115146456915*^9}, 3.602115240065276*^9, {3.602116747227586*^9, 
   3.602116788488945*^9}, {3.6021168743938875`*^9, 3.602116918921418*^9}, {
   3.60211705795338*^9, 3.602117058329402*^9}, {3.6021172082250023`*^9, 
   3.602117238050695*^9}, {3.6021174130767174`*^9, 3.6021174409793286`*^9}, 
   3.602118991155089*^9, 3.6021200515338125`*^9, {3.6021209652971597`*^9, 
   3.602120965423167*^9}, 3.602121178350339*^9, 3.602121216713539*^9, {
   3.6021212881986322`*^9, 3.602121297543488*^9}, {3.6021213383468246`*^9, 
   3.6021213933209724`*^9}, {3.602121665196542*^9, 3.602121665440556*^9}, 
   3.6021218488140574`*^9, {3.602121923819353*^9, 3.6021219278416014`*^9}, {
   3.602122118261487*^9, 3.6021221189805307`*^9}, {3.6021221599268737`*^9, 
   3.6021221789719644`*^9}, {3.602122808604021*^9, 3.6021228121562243`*^9}, {
   3.6021229080357103`*^9, 3.602122928665897*^9}, {3.602123134881706*^9, 
   3.602123140899048*^9}, {3.6021232344284067`*^9, 3.602123234771427*^9}, {
   3.602124758847705*^9, 3.6021247668741646`*^9}, {3.602125139931528*^9, 
   3.6021251600677004`*^9}, {3.602125192955579*^9, 3.602125236156049*^9}, {
   3.6021265790579424`*^9, 3.6021266365292344`*^9}, {3.602126673874372*^9, 
   3.602126714018671*^9}, {3.6021267662706633`*^9, 3.602126794718292*^9}, {
   3.6021268513435335`*^9, 3.6021268557667885`*^9}, {3.6021271166947308`*^9, 
   3.602127165831544*^9}, {3.602127585322581*^9, 3.602127633443323*^9}, {
   3.6021276861803436`*^9, 3.602127707491564*^9}, 3.6021277585355062`*^9, {
   3.6021278102944508`*^9, 3.602127812090554*^9}, {3.602128686289612*^9, 
   3.602128697020231*^9}, {3.6021289919411383`*^9, 3.6021290133103404`*^9}, {
   3.6021810277672796`*^9, 3.6021810493923187`*^9}, {3.6021815383776503`*^9, 
   3.602181551424554*^9}, 3.6021871448609715`*^9, {3.602245496130098*^9, 
   3.602245514411386*^9}, {3.6022455520208387`*^9, 3.6022455990834246`*^9}, {
   3.602245945896604*^9, 3.602245967287275*^9}, {3.6022460373342857`*^9, 
   3.602246096053151*^9}, 3.602246138193857*^9, {3.6022462100689993`*^9, 
   3.6022462105221252`*^9}, {3.602246371631815*^9, 3.602246371741205*^9}, {
   3.602246412710018*^9, 3.602246412772521*^9}, {3.602246478522649*^9, 
   3.6022464797101493`*^9}, 3.6022465472884083`*^9, {3.602246624772934*^9, 
   3.6022466253041883`*^9}, {3.602246686944931*^9, 3.6022466873824344`*^9}, {
   3.602246719273119*^9, 3.602246719366869*^9}, {3.6022469903830266`*^9, 
   3.6022470080705595`*^9}, {3.6022478665584784`*^9, 3.602247880628271*^9}, {
   3.602248540025034*^9, 3.602248540367052*^9}, {3.6022492103145027`*^9, 
   3.6022493015178337`*^9}, {3.602252611417851*^9, 3.602252617964737*^9}, {
   3.6022529482466364`*^9, 3.6022529503716373`*^9}, {3.6022533144661007`*^9, 
   3.6022533372317743`*^9}, {3.602253487778939*^9, 3.602253489435195*^9}, {
   3.602253520638381*^9, 3.602253521154005*^9}, {3.6022536092635508`*^9, 
   3.6022536176854424`*^9}, {3.6022539283266745`*^9, 
   3.6022539567486067`*^9}, {3.602254320093068*^9, 3.6022543236087008`*^9}, {
   3.602254363093151*^9, 3.6022543764056773`*^9}, {3.602254407530737*^9, 
   3.602254437827672*^9}, {3.6022545528435216`*^9, 3.602254557374777*^9}, {
   3.6022546029529953`*^9, 3.602254636312434*^9}, {3.602255006672535*^9, 
   3.602255009578789*^9}, {3.6022551988291607`*^9, 3.6022552010166636`*^9}, {
   3.602255240469866*^9, 3.6022552611730275`*^9}, {3.6022634132929535`*^9, 
   3.602263441199258*^9}, {3.6022636337308846`*^9, 3.602263642527775*^9}, {
   3.6022650560339346`*^9, 3.6022650595183163`*^9}, 3.602265119252808*^9, {
   3.602295048897744*^9, 3.602295071989068*^9}, {3.6022951155855637`*^9, 
   3.602295119441803*^9}, {3.6022953174231224`*^9, 3.6022954100414257`*^9}, {
   3.6022956633949347`*^9, 3.6022956931996417`*^9}, {3.602299289208573*^9, 
   3.602299296570998*^9}, {3.602299343224684*^9, 3.602299344910762*^9}, {
   3.6022996958438587`*^9, 3.602299696230894*^9}, {3.6023000676001453`*^9, 
   3.602300067684153*^9}, {3.602300332344309*^9, 3.602300379391003*^9}, {
   3.6024395715385513`*^9, 3.602439571616686*^9}, {3.6024398793672714`*^9, 
   3.602439892945426*^9}, {3.6024417414166555`*^9, 3.6024417437737885`*^9}, {
   3.6024436977844443`*^9, 3.6024437248589993`*^9}, {3.6024437661653633`*^9, 
   3.6024437683494945`*^9}, {3.602443834933312*^9, 3.6024438375634623`*^9}, {
   3.6024453396114793`*^9, 3.6024453549813643`*^9}, {3.602446634207612*^9, 
   3.602446715739272*^9}, {3.6024485107450824`*^9, 3.602448512911203*^9}, {
   3.602448972582514*^9, 3.6024489729615355`*^9}, {3.6024492268520765`*^9, 
   3.602449239238782*^9}, {3.602449317136245*^9, 3.602449318100308*^9}, {
   3.6024500879043846`*^9, 3.6024500947437763`*^9}, {3.602467923862791*^9, 
   3.6024679312682314`*^9}, {3.602468070360177*^9, 3.6024680962656612`*^9}, 
   3.6024682560148287`*^9, {3.60246859011594*^9, 3.602468592241064*^9}, {
   3.6024686901046867`*^9, 3.6024688938873563`*^9}, {3.602468990135847*^9, 
   3.6024689948951406`*^9}, {3.602469352772617*^9, 3.6024693695795794`*^9}, {
   3.602469423000636*^9, 3.6024694375844917`*^9}, {3.6024694678432064`*^9, 
   3.6024694939267187`*^9}, {3.60246995372405*^9, 3.6024699542470646`*^9}, {
   3.602512374231756*^9, 3.6025123792000237`*^9}, {3.6025125733151407`*^9, 
   3.6025125973935194`*^9}, {3.602617056237046*^9, 3.602617077495263*^9}, {
   3.6026176164551463`*^9, 3.6026176192312875`*^9}, {3.6026176746514606`*^9, 
   3.6026177103915076`*^9}, {3.6026196519111853`*^9, 3.602619677754985*^9}, 
   3.602620052630718*^9, {3.6026201142714634`*^9, 3.602620121755872*^9}, 
   3.602620154021541*^9, {3.602627962275591*^9, 3.6026279753323393`*^9}, {
   3.602631227260646*^9, 3.6026312308231325`*^9}, {3.602631555933143*^9, 
   3.6026315796675653`*^9}, {3.60270219456227*^9, 3.602702223227913*^9}, {
   3.602702502941929*^9, 3.602702504766035*^9}, {3.6027067631778984`*^9, 
   3.602706840124317*^9}, {3.6027071344541597`*^9, 3.602707135154217*^9}, {
   3.602707193864562*^9, 3.602707194363594*^9}, {3.6027129041532717`*^9, 
   3.602712906872423*^9}, {3.6027315217974696`*^9, 3.6027315219644794`*^9}, {
   3.602731555800417*^9, 3.602731555876424*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Quiet", "@", 
   RowBox[{"NLink`Private`F", "[", 
    RowBox[{"x", ",", " ", "u"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"cg", " ", "=", " ", 
    RowBox[{"NLink`Private`c", "  ", "//", " ", "Simplify"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NLink`Private`JSIM", "[", "x", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MM", " ", "=", " ", 
    RowBox[{
     RowBox[{"NLink`Private`M", "+", 
      RowBox[{
       RowBox[{"LowerTriangularize", "[", 
        RowBox[{"NLink`Private`M", ",", " ", 
         RowBox[{"-", "1"}]}], "]"}], "\[Transpose]"}]}], " ", "//", " ", 
     "Simplify"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MM", " ", "//", " ", "MatrixForm"}], ";"}]}], "Input",
 CellChangeTimes->{{3.602731287461053*^9, 3.6027313229650855`*^9}, {
  3.60273136034124*^9, 3.6027313925760727`*^9}, {3.602731633034842*^9, 
  3.6027316421113625`*^9}, {3.602731766781502*^9, 3.6027318011374674`*^9}, {
  3.602731844147932*^9, 3.60273188880849*^9}, {3.6027628366444798`*^9, 
  3.602762839128624*^9}, {3.602768831436783*^9, 3.602768837137109*^9}, {
  3.602769158137499*^9, 3.6027691624617376`*^9}}],

Cell[BoxData[
 RowBox[{"(*", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"non", "-", 
     RowBox[{"dimensionalized", " ", "units"}]}], ",", " ", 
    RowBox[{"see", " ", "[", "1", "]"}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"a", " ", "=", " ", "38.26328193656572"}], ";", " ", 
   RowBox[{"(*", " ", "mass", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"g", " ", "=", " ", "1"}], ";", " ", 
   RowBox[{"(*", " ", "gravity", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"b", " ", "=", " ", "18.131640968282920"}], ";", " ", 
   RowBox[{"(*", " ", 
    RowBox[{"inertia", "-", "like"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"d1", " ", "=", " ", 
    RowBox[{"1", "/", "2"}]}], ";", " ", 
   RowBox[{"(*", " ", 
    RowBox[{"link", " ", "length"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"d2", " ", "=", " ", 
    RowBox[{"1", "/", "2"}]}], ";", "\[IndentingNewLine]", 
   RowBox[{"k1", " ", "=", " ", "0.276829359066204"}], ";", " ", 
   RowBox[{"(*", " ", "inertia", " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"k2", " ", "=", " ", "8.842649843207664"}], ";", 
   "\[IndentingNewLine]", 
   RowBox[{"r1", " ", "=", " ", "0.447730568347073"}], ";", " ", 
   RowBox[{"(*", " ", 
    RowBox[{"c", ".", "o", ".", "m", ".", " ", "position"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"r2", " ", "=", " ", "0.052269431652927"}], ";"}], 
  "\[IndentingNewLine]", "*)"}]], "Input"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"du", " ", "=", " ", 
    RowBox[{"g", " ", "m2", " ", "r2"}]}], ";"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"a", " ", "=", " ", 
   FractionBox[
    RowBox[{"d", " ", 
     RowBox[{"(", 
      RowBox[{"m1", "+", "m2"}], ")"}]}], 
    RowBox[{"m2", " ", "r2"}]]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"b", " ", "=", " ", 
   FractionBox[
    RowBox[{
     RowBox[{"m1", " ", "r1"}], " ", "+", " ", 
     RowBox[{"m2", " ", "L1"}]}], 
    RowBox[{"m2", " ", "r2"}]]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"d", " ", "=", " ", 
   FractionBox["L1", "d"]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", "1"}], ";", 
  RowBox[{"(*", " ", 
   RowBox[{
    FractionBox[
     RowBox[{"g", " ", 
      RowBox[{"dt", "^", "2"}]}], "d"], ";"}], "*)"}], "\n", 
  RowBox[{"k1", " ", "=", " ", 
   RowBox[{
    FractionBox["1", "d"], 
    RowBox[{"(", 
     RowBox[{
      FractionBox["I2", 
       RowBox[{"m2", " ", "r2"}]], " ", "+", " ", "r2"}], ")"}]}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"k2", " ", "=", " ", 
   RowBox[{
    FractionBox["1", "d"], 
    RowBox[{"(", 
     RowBox[{
      FractionBox[
       RowBox[{"I1", " ", "+", " ", 
        RowBox[{"m1", " ", 
         RowBox[{"r1", "^", "2"}]}]}], 
       RowBox[{"m2", " ", "r2"}]], " ", "+", " ", 
      FractionBox[
       RowBox[{"L1", "^", "2"}], "r2"]}], ")"}]}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6027630128005705`*^9, 3.6027630745871086`*^9}, 
   3.602763145625177*^9}]
},
WindowSize->{707, 504},
WindowMargins->{{98, Automatic}, {30, Automatic}},
FrontEndVersion->"9.0 for Microsoft Windows (32-bit) (January 25, 2013)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 645, 15, 201, "Text"],
Cell[1205, 37, 813, 21, 132, "Input"],
Cell[2021, 60, 2692, 71, 446, "Input"],
Cell[4716, 133, 1635, 38, 152, "Input"],
Cell[6354, 173, 2832, 74, 212, "Input"],
Cell[9189, 249, 11065, 167, 172, "Input"],
Cell[20257, 418, 1276, 29, 186, "Input"],
Cell[21536, 449, 1464, 30, 252, "Input"],
Cell[23003, 481, 1488, 51, 261, "Input"]
}
]
*)

(* End of internal cache information *)
